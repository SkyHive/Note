# Ansible

Ansible是一个配置管理和配置工具，使用SSH连接服务器并运行配置好的任务，服务器不需要安装任何多余软件，只需要开启ssh，所有的工作都交给Client端的Ansible负责。

Ansible将bash脚本转换为可执行任务是非常容易的，它可以自动在执行任务之前获取上下文，因此也更加的干净。

Ansible使用`facts`来确保任务的幂等安全运行，它是在运行任务之前收集的系统和环境信息。Ansible使用这些`facts`来检查状态，看看是否需要改变某些东西以获得所需的结果。





# Prometheus

#### 主要特征：

* 多维度数据模型
* 灵活的查询语言
* 不依赖分布式存储，单个服务器节点是自主的
* 以`HTTP`方式，通过`Pull`模型拉去时间序列数据
* 也通过中间网关支持`Push`模型
* 通过服务发现或静态配置，来发现目标服务对象
* 支持多种多样的图表和界面展示，`Grafana`也支持它



#### 组件

Prometheus生态包括了很多组件，它们中的一些是可选的：

1. 主服务`Prometheus Server`负责抓取和存储时间序列数据
2. 客户库负责检测应用程序代码
3. 支持短生命周期的`PUSH`网关
4. 基于`Rails/SQL`仪表盘构建器的`GUI`
5. 多种导出工具，可以支持`Prometheus`存储数据转化为`HAProxy`、`StatsD`、`Graphite`等工具所需要的数据存储格式
6. 警告管理器
7. 命令行查询工具
8. 其他各种支撑工具

*多数`Prometheus`组件是GO语言写的，这使得组件很容易编译和部署*

#### 架构

![Prometheus Arhitecture](https://camo.githubusercontent.com/3a4e42452a50e36d5f93458bf538c7fd7836782a/68747470733a2f2f70726f6d6574686575732e696f2f6173736574732f6172636869746563747572652e737667)

`Prometheus`服务，可以直接通过目标拉取数据，或者间接地通过中间网关拉取数据。它在本地存储抓取的所有数据，并通过一定规则进行清理和整理数据，并把得到的结果存储到新的时间序列中，`PromQL`和其他`API`可视化地展示手机的数据



`Prometheus`在纪录纯数字时间序列方面表现非常好。它既适用于面向服务器等硬件指标的监控，也适用于高动态的面向服务架构的监控。`Prometheus`是为服务的可靠性而设计的，当服务出现故障时，它可以使你快速定位和诊断问题。它的搭建过程对硬件和服务没有很强的依赖关系。